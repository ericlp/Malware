FROM python:3.6

# Setup unprivileged user
RUN \
groupadd flask -r &&\
useradd -m -g flask flask


# Set the working directory to /app
WORKDIR /app

# Copy the current directory contents into the container at /flask-app
COPY ./init.sh /app
COPY ./LICENSE /app
COPY ./README.rst /app
COPY ./setup.cfg /app
COPY ./setup.py /app
COPY ./malware.py /app
COPY ./debug.sh /app


# Set permissions
RUN chown flask:flask /app

# Change to unprivileged user
USER flask:flask

# Install any needed packages specified in setup.py
RUN sh ./init.sh

# Define environment variable
#ENV NAME World
#ENV FLASK_APP malware.py

CMD sh ./debug.sh