import React, { Component } from 'react';
import UserComponent from './UserComponent'
import AnimeComponent from './AnimeComponent'
import dice from "../resources/dice.svg"
import menu from "../resources/menu.svg"

import {getLobby} from '../Helper'




import '../App.css';
 const pic = "https://myanimelist.cdn-dena.com/images/anime/7/3791.jpg"

class LobbyComponent extends Component{

    state = {
        lobby:null
    }

    componentDidMount() {
        setInterval(this.getLobby, 5000)
    }
    getLobby = () => {
        const { lobbyHash } = this.props.match.params;
        
        this.setState({lobby: getLobby(lobbyHash)});

    }

    render(){

         


            

        const { lobbyHash } = this.props.match.params;
        const lobby = this.state.lobby;
        const users = lobby ? lobby.users.map(e => <UserComponent {...{user:e.name, episodeCount: `${e.episodeCount}/${lobby.anime.episodeCount}`, leader: e.leader} } />) : "";

        return(
        <div> 
        <div>
                <button className="coolButton ">
                    <img className="userIcon" src={menu}           alt="user"></img> 
                </button>
                 <button className="coolButton ">
                    <img className="userIcon" src={dice}               alt="user"></img> 
                 </button>

                {/*<button className="coolButton ">
                    <img className="userIcon" src={userImage}           alt="user"></img> 
                </button>*/}
            </div>

            <div>
                <AnimeComponent {...{name:"Cowboy Bebop", episodes:25, id:"1", coverImage:pic} } />
            </div>


            {/*<UserComponent {...for="users"/>*/}
            
            <UserComponent {...{user:"Huan Jing", episodeCount:"1337"}}/>
            <UserComponent {...{user:"Senior Charles", episodeCount:"2"}}/>
            {

                users
            }
        </div>);
    }
}
export default LobbyComponent;