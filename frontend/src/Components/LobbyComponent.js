import React, { Component } from 'react';
import UserComponent from './UserComponent'
import {getLobby} from '../Helper'

import '../App.css';


class LobbyComponent extends Component{

    state = {
        lobby:null
    }

    componentDidMount() {
        setInterval(this.getLobby, 5000)
    }
    getLobby = () => {
        const { lobbyHash } = this.props.match.params;
        
        this.setState({lobby: getLobby(lobbyHash)});

    }

    render(){
        const { lobbyHash } = this.props.match.params;
        const lobby = this.state.lobby;
        const users = lobby ? lobby.users.map(e => <UserComponent {...{user:e.name, episodeCount: `${e.episodeCount}/${lobby.anime.episodeCount}`, leader: e.leader} } />) : "";

        return(
        <div> 
            {
                users
            }
        </div>
        );
    }
}
export default LobbyComponent;